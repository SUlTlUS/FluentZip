<Window
    x:Class="FluentZip.AddFilesWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    mc:Ignorable="d"
    xmlns:local="using:FluentZip"
    Title="添加文件">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <!-- 设置窗口尺寸的替代方案 -->
    

    <Grid x:Name="RootGrid" Padding="24" RowSpacing="16">
        <Grid.Resources>
            <SolidColorBrush x:Key="AddFilesHeaderSeparatorBrush" Color="#1FFFFFFF" />
            <SolidColorBrush x:Key="AddFilesRowBackgroundBrush" Color="Transparent" />
            <ItemsPanelTemplate x:Key="VerticalListPanel">
                <ItemsStackPanel Orientation="Vertical"/>
            </ItemsPanelTemplate>
            <DataTemplate x:Key="AddFileDetailTemplate">
                <Grid Height="40" Padding="0,0,12,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="{Binding ElementName=HeaderColIcon, Path=ActualWidth}"/>
                        <ColumnDefinition Width="{Binding ElementName=HeaderColName, Path=ActualWidth}"/>
                        <ColumnDefinition Width="{Binding ElementName=HeaderColSize, Path=ActualWidth}"/>
                        <ColumnDefinition Width="{Binding ElementName=HeaderColPath, Path=ActualWidth}"/>
                    </Grid.ColumnDefinitions>
                    <FontIcon Grid.Column="0"
                              Glyph="&#xE7C3;"
                              FontSize="18"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center"
                              Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    <TextBlock Grid.Column="1"
                               Text="{Binding DisplayName}"
                               VerticalAlignment="Center"
                               TextTrimming="CharacterEllipsis"
                               Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                    <TextBlock Grid.Column="2"
                               Text="{Binding SizeDisplay}"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               FontSize="13"/>
                    <TextBlock Grid.Column="3"
                               Text="{Binding SourcePath}"
                               VerticalAlignment="Center"
                               Margin="10,0,0,0"
                               Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                               FontSize="13"
                               TextTrimming="CharacterEllipsis"/>
                </Grid>
            </DataTemplate>
        </Grid.Resources>
         <Grid.RowDefinitions>
             <RowDefinition Height="Auto"/>
             <RowDefinition Height="Auto"/>
             <RowDefinition Height="*"/>
             <RowDefinition Height="Auto"/>
             <RowDefinition Height="Auto"/>
             <RowDefinition Height="Auto"/>
         </Grid.RowDefinitions>

        <!-- 标题区域 -->
        <TextBlock
            Grid.Row="0"
            Text="添加文件到压缩文件"
            Style="{StaticResource SubtitleTextBlockStyle}"
            Margin="0,0,0,4"/>

        <!-- 提示信息 -->
        <TextBlock
            x:Name="DestinationHintTextBlock"
            Grid.Row="1"
            FontSize="13"
            Opacity="0.75"
            TextWrapping="Wrap"/>

        

        <!-- 文件列表，使用与 ArchiveViewPage 一致的视觉风格 -->
        <Border Grid.Row="2"
                Margin="0,8,0,0"
                Background="{ThemeResource LayerFillColorDefaultBrush}"
                BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                BorderThickness="0"
                CornerRadius="8">
            <ScrollViewer HorizontalScrollBarVisibility="Auto"
                          VerticalScrollBarVisibility="Auto"
                          ZoomMode="Disabled">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0"
                          x:Name="HeaderGrid"
                          BorderBrush="{ThemeResource SurfaceStrokeColorDefaultBrush}"
                          BorderThickness="0,0,0,1"
                          Margin="4,0,4,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition x:Name="HeaderColIcon" Width="40" MinWidth="40"/>
                            <ColumnDefinition x:Name="HeaderColName" Width="220" MinWidth="140"/>
                            <ColumnDefinition x:Name="HeaderColSize" Width="120" MinWidth="80"/>
                            <ColumnDefinition x:Name="HeaderColPath" Width="2*" MinWidth="160"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="1"
                                   Text="名称"
                                   VerticalAlignment="Center"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <Rectangle Grid.Column="1"
                                   HorizontalAlignment="Right"
                                   Width="1"
                                   Height="16"
                                   Fill="{ThemeResource SurfaceStrokeColorDefaultBrush}"/>

                        <TextBlock Grid.Column="2"
                                   Text="大小"
                                   Margin="10,0,0,0"
                                   VerticalAlignment="Center"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <Rectangle Grid.Column="2"
                                   HorizontalAlignment="Right"
                                   Width="1"
                                   Height="16"
                                   Fill="{ThemeResource SurfaceStrokeColorDefaultBrush}"/>

                        <TextBlock Grid.Column="3"
                                   Text="文件路径"
                                   Margin="10,0,0,0"
                                   VerticalAlignment="Center"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                    </Grid>

                    <ListView Grid.Row="1"
                              x:Name="FileListView"
                              ItemsPanel="{StaticResource VerticalListPanel}"
                              ItemTemplate="{StaticResource AddFileDetailTemplate}"
                              SelectionMode="Extended"
                              Padding="4,4,4,4"
                              SelectionChanged="FileListView_SelectionChanged">
                        <ListView.Resources>
                            <Style TargetType="ListViewItem">
                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                            </Style>
                        </ListView.Resources>
                    </ListView>
                </Grid>
            </ScrollViewer>
        </Border>



        <!-- 管理按钮 -->
        <StackPanel
            Grid.Row="3"
            Orientation="Horizontal"
            HorizontalAlignment="Right"
            Spacing="12"
            Margin="0,16,0,0">

            <Button
                x:Name="AddButton"
                Content="添加(A)"
                MinWidth="88"
                Height="36"
                Click="AddButton_Click"/>

            <Button
                x:Name="RemoveButton"
                Content="删除(D)"
                MinWidth="88"
                Height="36"
                IsEnabled="False"
                Click="RemoveButton_Click"/>
        </StackPanel>

        <!-- 更多选项 -->
        <Grid Grid.Row="4" Margin="0,16,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <CheckBox
                Content="更多选项..."
                IsEnabled="False"
                VerticalAlignment="Center"/>
        </Grid>

        <!-- 底部按钮栏 -->
        <Grid Grid.Row="5" Margin="0,24,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <TextBlock
                Grid.Column="0"
                Text="确认列表后点击&quot;开始&quot;执行"
                Opacity="0.7"
                VerticalAlignment="Center"/>

            <Button
                Grid.Column="1"
                Content="取消"
                MinWidth="88"
                Height="36"
                Margin="12,0,0,0"
                Click="CancelButton_Click"/>

            <Button
                x:Name="StartButton"
                Grid.Column="2"
                Content="开始"
                MinWidth="88"
                Height="36"
                Margin="12,0,0,0"
                IsEnabled="False"
                Click="StartButton_Click"/>
        </Grid>
    </Grid>
</Window>