<Application
    x:Class="FluentZip.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FluentZip">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <XamlControlsResources xmlns="using:Microsoft.UI.Xaml.Controls" />
            </ResourceDictionary.MergedDictionaries>

            <!-- ★★★ 使用主题字典 (ThemeDictionaries) 才能确保覆盖生效 ★★★ -->
            <ResourceDictionary.ThemeDictionaries>

                <!-- 1. 默认/深色主题 (Default/Dark) -->
                <ResourceDictionary x:Key="Default">
                    <!-- 直接定义同名资源键，不需要 Style -->
                    <AcrylicBrush x:Key="MenuFlyoutPresenterBackground" 
                              TintColor="#202020" 
                              TintOpacity="0.6" 
                              TintLuminosityOpacity="0.8"
                              FallbackColor="#2C2C2C" />

                    <AcrylicBrush x:Key="CommandBarOverflowPresenterBackground" 
                              TintColor="#202020" 
                              TintOpacity="0.6" 
                              TintLuminosityOpacity="0.8" 
                              FallbackColor="#2C2C2C" />

                    <!-- 边框颜色 -->
                    <SolidColorBrush x:Key="MenuFlyoutPresenterBorderBrush" Color="#30FFFFFF" />
                    <SolidColorBrush x:Key="CommandBarOverflowPresenterBorderBrush" Color="#30FFFFFF" />
                </ResourceDictionary>

                <!-- 2. 浅色主题 (Light) -->
                <ResourceDictionary x:Key="Light">
                    <AcrylicBrush x:Key="MenuFlyoutPresenterBackground" 
                              TintColor="#F3F3F3" 
                              TintOpacity="0.6" 
                              TintLuminosityOpacity="0.8" 
                              FallbackColor="#F9F9F9" />

                    <AcrylicBrush x:Key="CommandBarOverflowPresenterBackground" 
                              TintColor="#F3F3F3" 
                              TintOpacity="0.6" 
                              TintLuminosityOpacity="0.8" 
                              FallbackColor="#F9F9F9" />

                    <!-- 边框颜色 -->
                    <SolidColorBrush x:Key="MenuFlyoutPresenterBorderBrush" Color="#30000000" />
                    <SolidColorBrush x:Key="CommandBarOverflowPresenterBorderBrush" Color="#30000000" />
                </ResourceDictionary>

            </ResourceDictionary.ThemeDictionaries>


            <!-- ★★★ 样式微调 (可选) ★★★ -->
            <!-- 虽然背景已经变了，但我们还可以加圆角 -->
            <Style TargetType="MenuFlyoutPresenter">
                <Setter Property="CornerRadius" Value="8" />
                <Setter Property="Padding" Value="4" />
                <Setter Property="BorderThickness" Value="1" />
                <!-- 注意：不要在这里设置 Background，让它自动读取上面的资源键 -->
            </Style>

            <Style TargetType="CommandBarOverflowPresenter">
                <Setter Property="CornerRadius" Value="8" />
                <Setter Property="Padding" Value="4" />
                <Setter Property="BorderThickness" Value="1" />
            </Style>

        </ResourceDictionary>
    </Application.Resources>
</Application>